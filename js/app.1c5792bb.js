(function(e){function t(t){for(var i,l,n=t[0],s=t[1],c=t[2],d=0,p=[];d<n.length;d++)l=n[d],Object.prototype.hasOwnProperty.call(o,l)&&o[l]&&p.push(o[l][0]),o[l]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);u&&u(t);while(p.length)p.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],i=!0,n=1;n<a.length;n++){var s=a[n];0!==o[s]&&(i=!1)}i&&(r.splice(t--,1),e=l(l.s=a[0]))}return e}var i={},o={app:0},r=[];function l(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=i,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)l.d(a,i,function(t){return e[t]}.bind(null,i));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],s=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var u=s;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"15a7":function(e,t,a){},1771:function(e,t,a){var i={"./circle-outline.png":"223f","./map-marker-outline.png":"aa4e","./map-marker-path.png":"7be1","./shape-polygon-plus.png":"b9cb"};function o(e){var t=r(e);return a(t)}function r(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id="1771"},"223f":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAABW0lEQVRIx92VTU7DMBSEPxqlG8oR4AC0l+B326pAewUQFQhuAeUIsKu4DGJDiwgqbOEAYUGRoCw8Bi8cJU5WMJJly35vxp7YL/DfUQf6wDWQAG9qieZ6iimFHeAZmOe0J6AbQhwBFw7BHXAMNIFFtabmxk7cEKgVEbDk78BBTlIEHAIz5ZwXscWSrwWcet0R6WQF1R3P90M8FQbKnZLx4fuO54W89Ng1EceenXSJ7NEuga8SAp/AlcZtX8Cj1FdLkFu0xJH4FlMtNioILIkj9VlksVBBwOb+WOwKvKhfriCwov7VJ3CrfquCwLb6G99iD+PfGHPlQhEB9+LY9QXUMYVrjnn+oTji96HFWUFdBc2AjQDyTeBDue284KEjMsixK9LOLflZkd3UMFXRluEJcIJ5RA21FnDqeG7Jg0pMR37m/XCmRWzJQowpXCPgAfNCU41HmNsSlyX/G/gG661ouULF4hEAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjItMDItMTBUMDA6NTE6NDgrMDA6MDD47uUhAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIyLTAyLTEwVDAwOjUxOjQ4KzAwOjAwibNdnQAAAABJRU5ErkJggg=="},"56d7":function(e,t,a){"use strict";a.r(t);var i=a("7a23");const o={id:"navbar",class:"flex align-items-center justify-content-between"},r={class:"flex justify-content-between"},l={key:0,id:"upload-panel"},n={id:"file-upload"},s=Object(i["i"])("p",null,"Glisser-déposer...",-1),c={id:"map-container"},u={id:"calque"},d={class:"card"},p={key:0,id:"layers-table"},A={class:"flex justify-content-between align-items-center"},m={class:"p-float-label mt-1"},b=Object(i["i"])("label",{for:"layers-name"},"Nom",-1),y=Object(i["k"])("Aucun calque créé."),h={class:"w-full"},O=Object(i["k"])("Aucun objet créé dans ce calque."),f={class:"flex justify-content-between"},j=Object(i["k"])(" Saisie manuelle "),v={class:"flex justify-content-between align-items-center mt-1"},_={class:"p-float-label w-7"},g=Object(i["i"])("label",{for:"points-name"},"Nom",-1),w=Object(i["i"])("h4",null,"Coordonnées",-1),E={class:"mt-1 flex justify-content-between align-items-end"},L=Object(i["i"])("h5",null,"Aperçu",-1),I={key:0},C=Object(i["i"])("h5",null,"Clustering",-1);function D(e,t,D,B,M,x){const k=Object(i["w"])("Toast"),R=Object(i["w"])("ToggleButton"),V=Object(i["w"])("SelectButton"),U=Object(i["w"])("Button"),T=Object(i["w"])("FileUpload"),P=Object(i["w"])("InputText"),F=Object(i["w"])("Column"),G=Object(i["w"])("DataTable"),N=Object(i["w"])("ColorPicker"),Q=Object(i["w"])("Dropdown"),W=Object(i["w"])("Textarea"),J=Object(i["w"])("InputSwitch"),S=Object(i["w"])("Card");return Object(i["q"])(),Object(i["h"])("div",null,[Object(i["l"])(k),Object(i["i"])("div",o,[Object(i["i"])("div",r,[Object(i["l"])(R,{id:"btn-panel",modelValue:M.panelActivated,"onUpdate:modelValue":t[0]||(t[0]=e=>M.panelActivated=e),onIcon:M.panelIcon,offIcon:M.panelIcon},null,8,["modelValue","onIcon","offIcon"]),Object(i["l"])(V,{class:"flex justify-content-between",modelValue:M.selectedNavOption,"onUpdate:modelValue":t[1]||(t[1]=e=>M.selectedNavOption=e),options:M.navOptions,dataKey:"name",optionValue:"name"},{option:Object(i["E"])(e=>[Object(i["i"])("i",{class:Object(i["o"])(e.option.icon+" mdi-4vh")},null,2)]),_:1},8,["modelValue","options"])])]),M.uploadActivated?(Object(i["q"])(),Object(i["h"])("div",l,[Object(i["i"])("div",n,[Object(i["l"])(U,{icon:"pi pi-times",class:"p-button-rounded p-button-text align-self-end mb-2",onClick:t[2]||(t[2]=e=>M.uploadActivated=!1)}),Object(i["l"])(T,{customUpload:!0,onUploader:e.fileHandler,accept:".csv, .json, .geojson",chooseLabel:"Choisir",uploadLabel:"Ajouter",cancelLabel:"Annuler"},{empty:Object(i["E"])(()=>[s]),_:1},8,["onUploader"])])])):Object(i["g"])("",!0),Object(i["i"])("div",c,[Object(i["i"])("div",{id:"map",class:"h-full",style:Object(i["p"])({cursor:"pinplus"===this.selectedNavOption?`url(${a("1771")("./"+this.userInput.type.img)}) 20 20, move`:""})},null,4),Object(i["i"])("div",u,[Object(i["i"])("div",d,[Object(i["l"])(R,{id:"btn-calque",modelValue:M.layersActivated,"onUpdate:modelValue":t[3]||(t[3]=e=>M.layersActivated=e),onIcon:M.layerIcon,offIcon:M.layerIcon},null,8,["modelValue","onIcon","offIcon"])]),M.layersActivated?(Object(i["q"])(),Object(i["h"])("div",p,[Object(i["l"])(G,{class:"p-datatable-sm",value:M.layers,expandedRows:M.expandedRows,"onUpdate:expandedRows":t[6]||(t[6]=e=>M.expandedRows=e),selection:M.selectedLayer,"onUpdate:selection":t[7]||(t[7]=e=>M.selectedLayer=e),selectionMode:"single",scrollable:!0,scrollHeight:"80vh",style:{"min-width":"22vw"}},{header:Object(i["E"])(()=>[Object(i["i"])("div",A,[Object(i["i"])("span",m,[Object(i["l"])(P,{id:"layers-name",type:"text",class:"",modelValue:M.layerName,"onUpdate:modelValue":t[4]||(t[4]=e=>M.layerName=e)},null,8,["modelValue"]),b]),Object(i["l"])(U,{icon:"mdi mdi-layers-plus",onClick:t[5]||(t[5]=t=>e.addLayer())})])]),empty:Object(i["E"])(()=>[y]),expansion:Object(i["E"])(t=>[Object(i["i"])("div",h,[Object(i["l"])(G,{class:"p-datatable-sm",value:t.data.subLayers,onRowClick:x.putInfoInPanel},{empty:Object(i["E"])(()=>[O]),default:Object(i["E"])(()=>[Object(i["l"])(F,{field:"name",header:"Nom"}),Object(i["l"])(F,{field:"color",header:"Couleur"},{body:Object(i["E"])(e=>[Object(i["l"])(U,{style:Object(i["p"])({backgroundColor:"#"+e.data.color})},null,8,["style"])]),_:2},1024),Object(i["l"])(F,{header:"Visibilité"},{body:Object(i["E"])(a=>[Object(i["l"])(R,{class:"mr-2",modelValue:a.data.visible,"onUpdate:modelValue":e=>a.data.visible=e,onClick:t=>e.toggleObjectVisibility(a.data),onIcon:"pi pi-eye",offIcon:"pi pi-eye-slash"},null,8,["modelValue","onUpdate:modelValue","onClick"]),Object(i["l"])(U,{icon:"pi pi-trash",onClick:i=>e.removeObject(a.data,t.data)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["value","onRowClick"])])]),default:Object(i["E"])(()=>[Object(i["l"])(F,{expander:!0,headerStyle:"width: 3rem"}),Object(i["l"])(F,{field:"name",header:"Nom"}),Object(i["l"])(F,{field:"subLayers",header:"Objets"},{body:Object(i["E"])(e=>[Object(i["k"])(Object(i["z"])(e.data.subLayers.length),1)]),_:1}),Object(i["l"])(F,{header:"Visibilité"},{body:Object(i["E"])(t=>[Object(i["l"])(R,{class:"mr-2",modelValue:t.data.visible,"onUpdate:modelValue":e=>t.data.visible=e,onClick:a=>e.toggleLayerVisibility(t.data),onIcon:"pi pi-eye",offIcon:"pi pi-eye-slash"},null,8,["modelValue","onUpdate:modelValue","onClick"]),Object(i["l"])(U,{icon:"pi pi-trash",onClick:a=>e.removeLayer(t.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","expandedRows","selection"])])):Object(i["g"])("",!0)]),M.panelActivated?(Object(i["q"])(),Object(i["f"])(S,{key:0,class:"map-panel"},{title:Object(i["E"])(()=>[Object(i["i"])("div",f,[j,Object(i["l"])(U,{icon:"pi pi-download",onClick:t[8]||(t[8]=e=>M.uploadActivated=!0)})])]),content:Object(i["E"])(()=>[Object(i["i"])("div",v,[Object(i["i"])("span",_,[Object(i["l"])(P,{id:"points-name",type:"text",class:"max-w-full",modelValue:M.userInput.name,"onUpdate:modelValue":t[9]||(t[9]=e=>M.userInput.name=e)},null,8,["modelValue"]),g]),Object(i["l"])(N,{modelValue:M.userInput.color,"onUpdate:modelValue":t[10]||(t[10]=e=>M.userInput.color=e)},null,8,["modelValue"]),Object(i["i"])("span",null,[Object(i["l"])(Q,{options:M.objectOptions,optionLabel:"value",modelValue:M.userInput.type,"onUpdate:modelValue":t[11]||(t[11]=e=>M.userInput.type=e)},{value:Object(i["E"])(e=>[Object(i["i"])("div",{class:Object(i["o"])(e.value.icon)},null,2)]),option:Object(i["E"])(e=>[Object(i["i"])("div",{class:Object(i["o"])(e.option.icon)},null,2)]),_:1},8,["options","modelValue"])])]),w,Object(i["l"])(W,{class:"no-resize",rows:"5",cols:"30",modelValue:M.userInput.coords,"onUpdate:modelValue":t[12]||(t[12]=e=>M.userInput.coords=e)},null,8,["modelValue"]),Object(i["i"])("div",E,[Object(i["i"])("div",null,[L,Object(i["l"])(J,{modelValue:M.userInput.livePreview,"onUpdate:modelValue":t[13]||(t[13]=e=>M.userInput.livePreview=e)},null,8,["modelValue"])]),"pin"===M.userInput.type.name?(Object(i["q"])(),Object(i["h"])("div",I,[C,Object(i["l"])(J,{modelValue:M.userInput.useClustering,"onUpdate:modelValue":t[14]||(t[14]=e=>M.userInput.useClustering=e)},null,8,["modelValue"])])):Object(i["g"])("",!0),Object(i["l"])(U,{onClick:e.addObject,label:M.editionMode?"Modifier":"Ajouter"},null,8,["onClick","label"])])]),_:1})):Object(i["g"])("",!0)])])}a("6cc5");var B=a("e11e"),M=a.n(B);a("8243"),a("3ac1"),a("2573");const x=e=>(Object(i["s"])("data-v-720ee6c5"),e=e(),Object(i["r"])(),e),k={class:"flex justify-content-between"},R=x(()=>Object(i["i"])("h4",null,"Coordonnées",-1)),V={key:0,class:"p-float-label mt-5"},U={for:"points-name"},T=x(()=>Object(i["i"])("h4",{class:"mb-0"},"Personnalisation",-1)),P={class:"mt-1 flex justify-content-between"},F={key:0},G={key:1},N={key:1,class:"mt-5"};function Q(e,t,a,o,r,l){const n=Object(i["w"])("Button"),s=Object(i["w"])("Textarea"),c=Object(i["w"])("InputText"),u=Object(i["w"])("InputNumber"),d=Object(i["w"])("ColorPicker"),p=Object(i["w"])("Dropdown"),A=Object(i["w"])("Card");return Object(i["q"])(),Object(i["f"])(A,{class:"map-panel opacity-80"},{title:Object(i["E"])(()=>[Object(i["i"])("div",k,[Object(i["k"])(Object(i["z"])(r.fields[a.type].title)+" ",1),Object(i["l"])(n,{icon:"pi pi-download"})])]),content:Object(i["E"])(()=>[R,Object(i["l"])(s,{class:"no-resize",rows:"5",cols:"30"}),r.fields[a.type].name?(Object(i["q"])(),Object(i["h"])("span",V,[Object(i["l"])(c,{id:"points-name",type:"text",class:"w-full",modelValue:r.inputText,"onUpdate:modelValue":t[0]||(t[0]=e=>r.inputText=e)},null,8,["modelValue"]),Object(i["i"])("label",U,Object(i["z"])(r.fields[a.type].name),1)])):Object(i["g"])("",!0),T,Object(i["i"])("div",P,[r.fields[a.type].size?(Object(i["q"])(),Object(i["h"])("div",F,[Object(i["i"])("p",null,Object(i["z"])(r.fields[a.type].size),1),Object(i["l"])(u,{id:"points-size",showButtons:"",mode:"decimal",modelValue:r.size,"onUpdate:modelValue":t[1]||(t[1]=e=>r.size=e)},null,8,["modelValue"])])):Object(i["g"])("",!0),r.fields[a.type].fillColor?(Object(i["q"])(),Object(i["h"])("div",G,[Object(i["i"])("p",null,Object(i["z"])(r.fields[a.type].fillColor),1),Object(i["l"])(d,{class:"flex justify-content-center"})])):Object(i["g"])("",!0)]),r.fields[a.type].lineType?(Object(i["q"])(),Object(i["h"])("div",N,[Object(i["l"])(p,{options:r.fields[a.type].lineType.options,placeholder:r.fields[a.type].lineType.title,modelValue:r.select,"onUpdate:modelValue":t[2]||(t[2]=e=>r.select=e)},null,8,["options","placeholder","modelValue"])])):Object(i["g"])("",!0)]),_:1})}var W=a("9899"),J=a("bb57"),S=a("4c62"),Y=a("3822"),H=a("e75f"),X=a("0100"),K={name:"SidePanel",data(){return{fields:{pin:{title:"Points",textarea:"Coordonnées",name:"Nom",size:"Taille des points",fillColor:"Couleur"},polygon:{title:"Polygones",textarea:"Coordonnées",name:"Nom",size:"Taille des polygones",fillColor:"Couleur",lineType:{title:"Nature du trait",options:["Continu","Pointillé"]}},route:{title:"Route",textarea:"Coordonnées",name:"Nom",size:"Épaisseur du trait",fillColor:"Couleur",lineType:{title:"Nature du trait",options:["Continu","Pointillé"]}},circle:{title:"Cercles",textarea:"Coordonnées",name:"Nom",size:"Taille des cercles",fillColor:"Couleur"}},inputText:null,select:null,size:null}},components:{Card:W["a"],Button:J["a"],Textarea:S["a"],InputNumber:Y["a"],ColorPicker:H["a"],DropDown:X["a"]},props:["type"]},q=(a("81e6"),a("6b0d")),z=a.n(q);const Z=z()(K,[["render",Q],["__scopeId","data-v-720ee6c5"]]);var $=Z,ee=a("75a8");const te={pin:1,line:2,polygon:3},ae={pin:"Au moins un point doit être renseigné.",line:"Une ligne doit comporter au moins deux points.",polygon:"Un polygone doit comporter au moins trois points."};var ie={inputValidation:function(){return this.layers.length?this.previewLayer.name?this.selectedLayer.subLayers.find(e=>e.name===this.previewLayer.name)?{error:!0,summary:"Nom invalide",detail:"Il existe déjà un objet à ce nom dans le calque sélectionné."}:this.formattedCoords.length<te[this.userInput.type.name]?{error:!0,summary:"Coordonnées invalides",detail:ae[this.userInput.type.name]}:{error:!1}:{error:!0,summary:"Nom invalide",detail:'Le champ "nom" est obligatoire.'}:{error:!0,summary:"Pas de calques",detail:"Vous devez d'abord créer un calque."}},validateLayer:function(){return this.layerName?this.layers.find(e=>e.name===this.layerName)?{error:!0,summary:"Nom invalide",detail:"Il existe déjà un calque possédant ce nom"}:{error:!1}:{error:!0,summary:"Nom invalide",detail:'Le champ "nom" est obligatoire.'}}},oe={addObject:function(){const{error:e,summary:t,detail:a}=this.inputValidation();e?this.$toast.add({severity:"error",summary:t,detail:a,life:3500}):(Object(i["B"])(this.map).removeLayer(this.previewLayer.layer),this.previewLayer.layer.on("mouseover",(function(){this.setStyle({weight:8})})),this.previewLayer.layer.on("mouseout",(function(){this.setStyle({weight:3})})),this.previewLayer.layer.on("click",e=>{this.previewLayer=this.selectedLayer.subLayers.find(t=>t.layer===e.target),this.selectedLayer.subLayers=this.selectedLayer.subLayers.filter(e=>e!==this.previewLayer),this.userInput.name=this.previewLayer.name,this.userInput.type=this.previewLayer.type,this.previewLayer.coords.forEach(e=>{this.userInput.coords+=e.toString()+"\n"}),this.userInput.color=this.previewLayer.color,this.editionMode=!0}),this.previewLayer.visible=this.selectedLayer.visible,this.selectedLayer.subLayers.push(this.previewLayer),this.selectedLayer.featureGroup.addLayer(this.previewLayer.layer),this.$toast.add({severity:"success",summary:`L'objet "${this.previewLayer.name}" a été ajouté avec succès.`,life:3500}),this.resetInput())},addLayer:function(){const{error:e,summary:t,detail:a}=this.validateLayer();if(e)this.$toast.add({severity:"error",summary:t,detail:a,life:3500});else{const e={name:this.layerName,featureGroup:M.a.featureGroup(),subLayers:[],visible:!0};this.layers.push(e),this.map.addLayer(e.featureGroup),this.layerName="",this.selectedLayer=e}},removeLayer:function(e){Object(i["B"])(this.map).removeLayer(e.featureGroup),this.layers.splice(this.layers.indexOf(e),1),this.selectedLayer===e&&this.layers.length&&(this.selectedLayer=this.layers[0])},removeObject:function(e,t){t.subLayers.splice(t.subLayers.indexOf(e),1),t.featureGroup.removeLayer(e.layer)},toggleLayerVisibility:function(e){e.visible?(Object(i["B"])(this.map).addLayer(e.featureGroup),e.subLayers.forEach(e=>{e.visible=!0})):(Object(i["B"])(this.map).removeLayer(e.featureGroup),e.subLayers.forEach(e=>{e.visible=!1}))},toggleObjectVisibility:function(e){e.visible?Object(i["B"])(this.map).addLayer(e.layer):Object(i["B"])(this.map).removeLayer(e.layer)}};a("5363");delete M.a.Icon.Default.prototype._getIconUrl,M.a.Icon.Default.mergeOptions({iconRetinaUrl:a("584d"),iconUrl:a("6397"),shadowUrl:a("e2b9")});var re={name:"Map",components:{SidePanel:$},data(){return{initialMapOptions:{center:[47.01,-8.14],zoom:3,preferCanvas:!0},hasHeaders:!0,map:null,selectedNavOption:"select",panelIcon:"mdi mdi-plus mdi-4vh",panelActivated:!1,layersActivated:!1,uploadActivated:!1,editionMode:!1,layerIcon:"mdi mdi-layers-outline mdi-4vh",objectOptions:[{icon:"mdi mdi-map-marker-outline",name:"pin",img:"map-marker-outline.png"},{icon:"mdi mdi-map-marker-path",name:"line",img:"map-marker-path.png"},{icon:"mdi mdi-shape-polygon-plus",name:"polygon",img:"shape-polygon-plus.png"},{icon:"mdi mdi-circle-outline",name:"circle",img:"circle-outline.png"}],navOptions:[{icon:"mdi mdi-map-marker-plus-outline",name:"pinplus"},{icon:"mdi mdi-cursor-move",name:"select"}],expandedRows:null,previewLayer:null,selectedLayer:null,layerName:"",layers:[{name:"Layer 1",featureGroup:M.a.featureGroup(),subLayers:[],visible:!0},{name:"Layer 2",featureGroup:M.a.featureGroup(),subLayers:[],visible:!0}],userInput:{name:"",color:"0d89ec",type:{icon:"mdi mdi-map-marker-outline",name:"pin",img:"map-marker-outline.png"},coords:"",livePreview:!0,useClustering:!1}}},methods:{initMap:async function(){const e=M.a.map("map",this.initialMapOptions);M.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e),e.zoomControl.setPosition("bottomleft"),e.addLayer(this.layers[0].featureGroup),e.addLayer(this.layers[1].featureGroup),this.previewLayer={layer:null,name:this.userInput.name,color:"#"+this.userInput.color,type:this.userInput.type,coords:this.userInput.coords,visible:!0},this.selectedLayer=this.layers[0],e.on("click",e=>{"pinplus"===this.selectedNavOption&&(this.userInput.coords+=`${e.latlng.lat}, ${e.latlng.lng}\n`)}),this.map=e},resetInput:function(){this.userInput.name="",this.userInput.color="0d89ec",this.userInput.type={icon:"mdi mdi-map-marker-outline",name:"pin",img:"map-marker-outline.png"},this.userInput.coords="",this.previewLayer={layer:null,name:this.userInput.name,color:"#"+this.userInput.color,type:this.userInput.type,coords:this.userInput.coords,visible:!0},this.editionMode=!1},putInfoInPanel:function(e){Object(i["B"])(this.map).fitBounds(e.data.layer.getBounds(),{maxZoom:6}),this.selectedNavOption="pinplus",this.userInput.name=e.data.name,this.userInput.type=e.data.type,this.userInput.coords="",e.data.coords.forEach(e=>{this.userInput.coords+=e.toString()+"\n"}),this.userInput.color=e.data.color,this.editionMode=!0,this.previewLayer=this.selectedLayer.subLayers.find(t=>t.name===e.data.name),this.selectedLayer.subLayers=this.selectedLayer.subLayers.filter(e=>e!==this.previewLayer)},...oe,...ie,...ee["a"]},mounted(){this.initMap()},computed:{formattedCoords(){return this.userInput.coords.split("\n").filter(e=>/^.+([,;/]\s*).+$/.test(e)).map(e=>{try{return e.split(/[,;/]\s*/).map(e=>this.coordToDegrees(e))}catch{return}}).filter(e=>e)}},watch:{userInput:{handler:function(e){switch(this.previewLayer.layer&&Object(i["B"])(this.map).removeLayer(this.previewLayer.layer),this.userInput.type.name){case"pin":this.userInput.useClustering?this.previewLayer.layer=M.a.markerClusterGroup():this.previewLayer.layer=M.a.featureGroup(),this.formattedCoords.forEach(t=>{this.previewLayer.layer.addLayer(M.a.circleMarker(t,{color:"#"+e.color}))});break;case"line":this.previewLayer.layer=M.a.polyline(this.formattedCoords,{color:"#"+e.color});break;case"polygon":this.previewLayer.layer=M.a.polygon(this.formattedCoords,{color:"#"+e.color});break;default:}this.userInput.livePreview&&Object(i["B"])(this.map).addLayer(this.previewLayer.layer),this.previewLayer.name=this.userInput.name,this.previewLayer.color=""+this.userInput.color,this.formattedCoords.length&&this.userInput.livePreview&&Object(i["B"])(this.map).fitBounds(this.previewLayer.layer.getBounds(),{maxZoom:6}),this.previewLayer.coords=this.formattedCoords,this.previewLayer.type=this.userInput.type},deep:!0}}};a("895b");const le=z()(re,[["render",D]]);var ne=le,se=(a("098b"),a("a146"),a("4121"),a("bddf"),a("9319")),ce=a("485c"),ue=a("b3b6"),de=a("e8f7"),pe=a("f4ad"),Ae=a("a5af"),me=a("88b1"),be=a("8398"),ye=a("5b2c"),he=a("6f85"),Oe=a("5bd2");const fe=Object(i["e"])(ne);fe.use(se["a"]),fe.use(ce["a"]),fe.component("Toast",ue["a"]),fe.component("FileUpload",de["a"]),fe.component("InputSwitch",pe["a"]),fe.component("Button",J["a"]),fe.component("SelectButton",Ae["a"]),fe.component("ToggleButton",me["a"]),fe.component("InputText",be["a"]),fe.component("InputNumber",Y["a"]),fe.component("ColorPicker",H["a"]),fe.component("Textarea",S["a"]),fe.component("Card",W["a"]),fe.component("Dropdown",X["a"]),fe.component("DataTable",ye["a"]),fe.component("Column",he["a"]),fe.component("Dialog",Oe["a"]),fe.mount("#app")},"75a8":function(module,__webpack_exports__,__webpack_require__){"use strict";var papaparse__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("369b"),papaparse__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(papaparse__WEBPACK_IMPORTED_MODULE_0__),vue__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("7a23"),leaflet__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("e11e"),leaflet__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(leaflet__WEBPACK_IMPORTED_MODULE_2__),jsonschema__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("a41b"),jsonschema__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(jsonschema__WEBPACK_IMPORTED_MODULE_3__);const REGEX_LAT_HEADER=/^(lat|latitude)$/i,REGEX_LNG_HEADER=/^(lng|longitude)$/i,REGEX_DD=/^(-?\d{1,3})(?:[,\.](\d+))?(?:[°d]|deg)?$/i,REGEX_DD_HEM=/^(\d{1,3})(?:[,\.](\d+))?(?:[°d]|deg)?\s?([NSEWO])$/i,REGEX_DMS=/^(\d{1,3})(?:[°d]|deg)\s?(\d{1,2})(?:['’m]|min)\s?(?:(\d{1,2})(?:["s]|sec|''|’’))?\s?([NSEWO])$/i,ARRAY_SCHEMA={type:"array",items:{type:"array",items:{type:["number","string"]},minItems:2,maxItems:2},minItems:1},OBJECT_SCHEMA={type:"array",items:{type:"object",patternProperties:{"^([lL]at|[lL]atitude|[lL]ng|[lL]ongitude)$":{type:["number","string"]}}}};__webpack_exports__["a"]={fileHandler:function(e){switch(e.files[0].name.split(".").pop().toLowerCase()){case"csv":this.parseCsvFromFile(e.files[0]),this.uploadActivated=!1;break;case"json":this.parseJsonFromFile(e.files[0]),this.uploadActivated=!1;break;case"geojson":this.parseGeoJsonFromFile(e.files[0]),this.uploadActivated=!1;break;default:this.$toast.add({severity:"warn",summary:"Format inconnu.",detail:"Le format de fichier spécifié est non pris en charge.",life:3500})}},parseCsvFromFile:function(e){this.hasHeaders?papaparse__WEBPACK_IMPORTED_MODULE_0___default.a.parse(e,{dynamicTyping:!0,header:!0,skipEmptyLines:!0,transformHeader:e=>REGEX_LAT_HEADER.test(e)?"lat":REGEX_LNG_HEADER.test(e)?"lng":e,transform:(e,t)=>{if(["lat","lng"].includes(t))try{return this.coordToDegrees(e)}catch{this.$toast.add({severity:"error",summary:"Erreur lors de la lecture du fichier.",detail:`La valeur ${e} est illisible.`,life:3500})}return e},complete:e=>this.completeFuncFromObject(e.data)}):papaparse__WEBPACK_IMPORTED_MODULE_0___default.a.parse(e,{dynamicTyping:!0,header:!1,skipEmptyLines:!0,transform:e=>{try{return this.coordToDegrees(e)}catch{this.$toast.add({severity:"error",summary:"Erreur lors de la lecture du fichier.",detail:`La valeur ${e} est illisible.`,life:3500})}return e},complete:e=>this.completeFuncFromArray(e.data)})},parseGeoJsonFromFile:function(e){const t=new FileReader;t.onload=e=>{leaflet__WEBPACK_IMPORTED_MODULE_2___default.a.geoJSON(JSON.parse(e.target.result)).addTo(Object(vue__WEBPACK_IMPORTED_MODULE_1__["B"])(this.map))},t.readAsText(e)},parseJsonFromFile:function(e){const t=new FileReader;t.onload=e=>{const t=JSON.parse(e.target.result);if(Object(jsonschema__WEBPACK_IMPORTED_MODULE_3__["validate"])(t,ARRAY_SCHEMA).valid){var a=JSON.parse(e.target.result,(e,t)=>{if(Array.isArray(t))return t;try{return this.coordToDegrees(t)}catch{this.$toast.add({severity:"error",summary:"Erreur lors de la lecture du fichier.",detail:`La valeur ${t} est illisible.`,life:3500})}return t});this.completeFuncFromArray(a)}else if(Object(jsonschema__WEBPACK_IMPORTED_MODULE_3__["validate"])(t,OBJECT_SCHEMA).valid){const t=this;a=JSON.parse(e.target.result,(function(e,a){if(REGEX_LAT_HEADER.test(e))try{this.lat=t.coordToDegrees(a)}catch{t.$toast.add({severity:"error",summary:"Erreur lors de la lecture du fichier.",detail:`La valeur ${a} est illisible.`,life:3500}),this.lat=a}else{if(!REGEX_LNG_HEADER.test(e))return a;try{this.lng=t.coordToDegrees(a)}catch{t.$toast.add({severity:"error",summary:"Erreur lors de la lecture du fichier.",detail:`La valeur ${a} est illisible.`,life:3500}),this.lng=a}}}));this.completeFuncFromObject(a)}},t.readAsText(e)},coordToDegrees:function(coord){switch(!0){case"number"===typeof coord:return coord;case REGEX_DD.test(coord):return parseFloat(coord.replace(",","."));case REGEX_DD_HEM.test(coord):var[,deg,decimal=0,hemisphere]=REGEX_DD_HEM.exec(coord);return parseFloat(`${/SOW/i.test(hemisphere)?"-":""}${deg}.${decimal}`);case REGEX_DMS.test(coord):var[,deg,min,sec=0,hemisphere]=REGEX_DMS.exec(coord);return eval(`${/SOW/i.test(hemisphere)?"-":""}(${deg} + ${min} / 60 + ${sec} / 3600)`);default:throw new Error("Conversion impossible.")}},completeFuncFromObject:function(e){e.length>1e3&&(this.userInput.livePreview=!1),this.userInput.coords=e.map(e=>`${e.lat}, ${e.lng}`).join("\n")},completeFuncFromArray:function(e){e.length>1e3&&(this.userInput.livePreview=!1),this.userInput.coords=e.map(e=>e.join(", ")).join("\n")}}},"7be1":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAABO0lEQVRIx+2UsUoDQRRFj8rGxk8QtNLSxkaJH2BnJ/6Cf2BrClfIJn+gHyVWIYXCWqgBUyTRIGiROzBsZl5mYRvBCw9m3rvz7s7b3Qt/HRsN9NgFzoADYAx8WOQWcAu8ACWQKxfDFfAF/Ci+gY4lkHtkF3mEexHgujiPCZQiHANtrcsI91H1EXCqGCn3EBN4E6ENnGj9GuF+qn7n5e6Vm8UEisB1uxHuQPUnYA/YB56VG8QEMjX0m2c1HsZFwQo4ooVtYBJoPgV2VgmkohMQuE45mHIDgC1g6PGHyjUmAHDI4mebA0dNjaaKS0Uy6tzAxHplnwE9b98HNo3zjv9OmnfRY/mr6Nfk55aAswrfi/xxhdamd1VHNPfyazVHncQP2XXX4Ifs4sYSaEmkZOGilhehWiFu0kv+xxJ+AYgihPw5xZHfAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIyLTAyLTEwVDAwOjQ5OjEzKzAwOjAwYFAgiwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMi0wMi0xMFQwMDo0OToxMyswMDowMBENmDcAAAAASUVORK5CYII="},"81e6":function(e,t,a){"use strict";a("15a7")},"895b":function(e,t,a){"use strict";a("dd68")},aa4e:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAABVklEQVRIx+WTvUoDURCFP2I6FW1cfAAhhViodYjrM+grBJ8gglpp3iBvYSVapU4gXRRsjdgIdmoMohE2FjnLHRN38e5aCB4YLjtz5ueeOwv/AQFQBy6BgawLnCiWC7tAHxglWB/YyVM8UqEzoALMyraAc8WiLE0CM/l+Cu9AnGdgyadB3UweYxGoyhaM/0LcY58GV0qqmOK3OO17pkkoX9enwYuS5vS9x/QDVxWbxz34FAoJDYY6o4nTYjI2xAMdTVU2EvXM9DdGorJ8HZ8btHTG6/cEbOAeeZPx5lhOCw+saqoBsJzCs+u85tMAoK3ERgqnIU7btzjAtpLfgdI38ZJiI3EzoYl7wKLxF3GL0MxaHGAFeFWhQ+M/ku8t4XZeqBmp1mWxNLW8xWG8yrFU17JYmkKOul8QAPe4H+2B9PXNhBD4kIU/TZrxaHAHPEqa09+e/u/iE6Jmbfl+xICYAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIyLTAyLTEwVDAwOjUwOjE4KzAwOjAwX8yAewAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMi0wMi0xMFQwMDo1MDoxOCswMDowMC6ROMcAAAAASUVORK5CYII="},b9cb:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAAA00lEQVRIx+2TIQ7CQBBFX4pGYAkJXAGBIVwBgYCLILCcYD0Wi0SiMD0GvQJVJCVkEUxD027DTmGDgJ+smfyZt3+2hb8esnIqikKTvwoYF6K7VuCq13md2ikA9oW3oj5wBTKg53EZ71vnMtKw9fSrAG3gLA2jEIClmI+ayL5qAScBzEIAFjI8EdjHFQvAKPu832Alxky5ItUjr5WQrhbgm2QIbIBLE0AdJAKmwKEw9AbsgYkWUF6X4fkJWyCV2qDJYFeS/CRS67w7uJwkBuYE+j9+WHd6qFYbLzWPgQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMi0wMi0xMFQwMDo1MTowNSswMDowMB1zihsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjItMDItMTBUMDA6NTE6MDUrMDA6MDBsLjKnAAAAAElFTkSuQmCC"},dd68:function(e,t,a){}});
//# sourceMappingURL=app.1c5792bb.js.map